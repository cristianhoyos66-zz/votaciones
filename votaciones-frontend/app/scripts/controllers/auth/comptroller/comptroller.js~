'use strict';

/**
 * @ngdoc function
 * @name votacionesFrontendApp.controller:AuthComptrollerCtrl
 * @description
 * # AuthComptrollerCtrl
 * Controller of the votacionesFrontendApp
 */
angular.module('votacionesFrontendApp')
  .controller('AuthComptrollerCtrl', [
    'serviceUsers',
    'serviceMessages',
    AuthComptrollerCtrl
  ]);

function AuthComptrollerCtrl(serviceUsers, serviceMessages) {

  var comptrollersVm = this;

  function errorGetAllUsers() {
    serviceMessages.generalMessage('Error', 'Error de operación', "error");
  }

  function notifyGetAllUsers(users) {
    comptrollersVm.students = users;
  }

  function errorGetComptrollersCandidates() {
    serviceMessages.generalMessage('Error', 'Error de operación', "error");
  }

  function notifyGetComptrollersCandidates(users) {
    comptrollersVm.comptrollerCandidates = users;
  }

  function addCandidates(user) {
    serviceUsers.setUserAsComptroller(user._id);
  }

  function removeCandidates(user) {
    serviceUsers.removeUserAsComptroller(user._id);
  }

  serviceUsers.getAll().then(0, errorGetAllUsers, notifyGetAllUsers);

  serviceUsers.getUsersComptrollerCandidates().then(0, errorGetComptrollersCandidates, notifyGetComptrollersCandidates);

  comptrollersVm.addCandidates = addCandidates;

  comptrollersVm.removeCandidates = removeCandidates;
  
}
